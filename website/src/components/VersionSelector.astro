---
import VersionLinks, { getVersions } from "./VersionLinks.astro";
import { ChevronDownIcon } from "@heroicons/react/16/solid";
export interface Props {
  currentVersion?: string;
}

const { currentVersion } = Astro.props as Props;
---

<details class="dropdown">
  <summary
    class={`
      border
      border-transparent
      btn
      btn-primary
      btn-sm
      my-1
      rounded-lg
      text-white
    `}
  >
    {currentVersion ? `${currentVersion}` : "Select A Version"}
    <ChevronDownIcon className="size-4 text-white" />
  </summary>
  <ul
    class={`
      -translate-x-1/2
      backdrop-blur
      bg-dropdown-menu-bg
      dropdown-content
      font-semibold
      left-1/2
      p-2
      rounded-lg
      shadow
      text-dropdown-menu-text
      text-sm
      top-[100%]
      w-52
      z-20
    `}
  >
    {
      getVersions().then((versions) =>
        versions.map((version) => (
          <li
            class={`
              hover:bg-dropdown-menu-hover
              rounded-md
            `}
          >
            <a
              class={`
                block
                px-4
                py-2
              `}
              href={`${version}/`}
              onclick={`localStorage.lastVisitedModVersion = "${version}";`}
            >
              {version}
            </a>
          </li>
        ))
      )
    }
  </ul>
</details>
